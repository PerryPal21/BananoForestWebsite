const path = require("path");
const fetch = require("node-fetch");
const math = require("mathjs");

const fastify = require("fastify")({
  logger: false,
});

fastify.register(require("fastify-static"), {
  root: path.join(__dirname, "public"),
  prefix: "/", // optional: default '/'
});

fastify.register(require("fastify-formbody"));

fastify.register(require("point-of-view"), {
  engine: {
    handlebars: require("handlebars"),
  },
});

const address1 =
  "ban_3g535xyeuegynfmzc4jxksqy959pcb73ykby3h1b8w97eotomsejdjtperry";
const address2 =
  "ban_3g535xyeuegynfmzc4jxksqy959pcb73ykby3h1b8w97eotomsejdjtperry";
const address3 =
  "ban_3g535xyeuegynfmzc4jxksqy959pcb73ykby3h1b8w97eotomsejdjtperry";
const address4 =
  "ban_3g535xyeuegynfmzc4jxksqy959pcb73ykby3h1b8w97eotomsejdjtperry";

const qr1 = "data:image/png;base64,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";
const qr2 = "data:image/png;base64,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";
const qr3 = "data:image/png;base64,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";
const qr4 = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALQAAAC0CAYAAAA9zQYyAAANR0lEQVR4Xu2d0XLjOAwEk///6Nute1rJVerqDEhbyuwrSBAYNEFKdrzf//3999V/VeAhCnwX6IdUsmn8r0CBLgiPUqBAP6qcTaZAl4FHKVCgH1XOJlOgy8CjFCjQjypnkynQZeBRChToR5WzyRToMvAoBQr0o8rZZAp0GXiUAgX6UeVsMgW6DDxKgQL9qHI2mRjo7+/vrSqev759Xp/s52Dt18Htemk8pK+N3xaL1rf+aHyaT4GWf99QoAnJzF6gTydE2hGpHAWaFMrsBbpAZwTB7F9/5Uh32Fnf1R3R3qmnC0wnCtktzbY+pL9d39bX+h+/Q1vBKGAS1NppPYq/QM/+TTXVj+r1skHSP5KdDsjuYFrfAligjxUgfS1wtr7Wfzv0SbECXaAPCqR3Ppqf2unOPN2R6IRI86H5ab6kB+WXrv9xHXp1wqngBAR1bBKc8rfr7843Xa9Anz7osIISINsFhk9SKd7UnuZr9acNbvMhf9sfCqlDvVvw5QIXaHUljU/E1W85VgNNT820wwlomm/tdj07Pm0QpOe74yG9l7/lKNDHElgg7PgCHfb4T7tjTW8g6gjWbgG14wt0gT4wYDdEgXZfH6YNGuKY//rouzs0rW/vhAQoAU8FoXhT/zZfGw8BSfrRfNKP/N/+Dk0FsQVGweRbC7t+gc6+K1Kgwy/40521QLuH4nZo+D60Baod+tgh6QSkE4U2PPmnemz/YMUGNA0grU8FoTsfFcyub9ej9VNg0vlp/jS/QJ8UKNDXyBRoeSelHbhbUNvxaHyaH204Wj/VL52f5k/z26HboRUjvx5opdYPBtMds/bsoY70+0HJ1JSPe8uhov/BYBK89gIdvcm2d7wfMHyYUmDXAkv6pvWj+e3Q8nc5qGC1X28YAjK1vx3oNIHp+fQQQ3aKh+bTibV6w1D8ZE+BIv+r7fFH36sDtP4tcLaA1n/6Wi1dz+pn9bD+V48v0PK9eQpYO/RapAt0gb586F6L37z3GGjqWC+f5Cz+PWnqgFbC6SOY9KI7OF1hpvWm/HfnQ/Ur0KAQFZQEJsDSDUjx2Q2SbpjV+ZDeBbpAXypgN0yBpi0n7amgtkPJ8L52H9Ht0LZCp/G7C0bhUjw0n+zkn+zkn+wELG1w6sB0ZVrdACj/l/j+JhR99E0Jk6AUcBrebqAo3zQf0psAS/WwG4jqO22P79AkMBWYEkoBSAtI8ZF/spN/slvA0njsehT/tL1Ah4oSIGQPl3+5k7dDpy0QKpIWdHVHIP8WOJKT1rPz6QS09ukTN83H6j/eoa0gFHAKQOqf5lNHJD3S+RZY22BofFof8m/1L9DDn1zajlSgjz8lRvoR4AW6QF8yQh308R06FYA6FvnHHRz+lFd6hZgGgPQiPchu403Hf1yHJuAoYSoQ+Z8u0LQ/yp8Kms6nfHZv2LSeL/He7YOVVIBpIKw/Oz4FzAKcrmfzS+tZoHvlUIyngK4+cceBThOm106kPh3RNJ86BOWXFozWp45p86d8qB52PYqf9KP6FeiTAgQUAUAFsf4JGPJHAFA+BVoe4VQQEpwAooJSx6CCkn+ab+02XoqP9E3jm16f/LVDt0NfMvLrgaYOYjtq2sGpIBTP9Pq6w8gPemy+Np7d/m184x26QB8VoDswFYyuBHZD0npkL9DyTk0bwgo6PT71R8BQ/jTfxkf+3r1hbHzt0CcFCAiyEwC2QO3QVrHj+PEvJ9k7KB3R5I/St4AQoDYeWp/yT/OjDWnt9kSh/KyeqMe7P/penTABRQK9u+AUH+Vn47eA2fVpQxAPqEeBvpbIAkEFoxOACpb6J2DJnq5P8ws0EEAdhAAq0Nc/CkD6EqB2A1G9lt+hKQDbsVIBbTy0no2fOpSNj9a3wKTjKX4CnOaTvUAPd3hbMLthqKDTJwrlY+Mnf5Qf2Qt0gT4o0A59AsLuWDoy7RE93QFsPnZ96586VDu0rUDY0exyaceg9QgoC4j1l25Yu16qp21AaX60gV/8r35tNy2ABdSOp3gJCAtYWnC7HsWfxkMA2njJX4GWV6R26OPvZtCGJwALNPw/hNRR2qHdf9RJehZo2rJgT4Gk5W0HJn/2SLf+poGy+VN+1IHT+FGv3XdoCsgmbAUk/1Qwij+dv7tDFujwLQcBQcDZgtN6tqDkr0Bf37ltfUnvtz8U2gB75Vj7UGY3NG1Ye2JSfS0v8SeFaQLpfEqYCpDOJ/+UHwFFHY3WT0+0aeAonnS9Ai2vUAQg2S2gdjwBQRuM1qMGYO12Q5L/Al2gLxWgDUKAkb1Ay/+0KxWM5ls7dUDqoHQCEIDkn+IjQK2d9NP+0td2FNC0gLSeFkD+Dgb5T4EiYAm4T9eb9Evt41cOWxAq0PKHiAJ9ydB0A0mBpfkFukAX6H8VoB386UegjY86RK8cpNBae9yh7ZUgBcheaWi8tVM50g2+ekNQvpQfzaf4LS8Uz4u/9KHQBligs0/+SD8LHPmjZxzawARkOr9Aw9dRU4FpPgFEHc7OT+Mp0BIY2sFWUDvedjSKNwWoQF//DgjqP33loCtIChwmNLyhCHiKh+YTwKQnzZ/u6BQP1Zf0Su3jD4VpwtThKGGaTwWmgkzPJyBJT5pP8aYbzvqn+qX2Ag0KUsGpADSfgCzQpPDRXqAL9EEBOuFog9EJ5/D0o7cDbTuWPdJofCo4+bcdlwAhvWw+afx2Pm0QslukC3T47T0LFBWICmyBog1j47fr23zihrD7LQd1HLJTAUhwmm+BS/0RcKke5N/GT/pSvNZO9XjJr0C79562oLog4WtH6nBp/Hb+4zr06oLSjqf1CQCav71gi394Z3VHp3rF9VjdoQkIEtAKQB3EHrEUf4F2v/Bv60n6b79y6IDkkUsC0fpxRwjjpfjshk/H03zbELZv+HZod4emgtMGW72BbHy0oejEo3xuBzQFTAKToGS3AKUFong+TQ+rP+lpO3S6Puk9fuX4tAJSPAXafR97Wq9pfwU6/L/IqWPQhrIdi9azHdMCZcdTvNP+CnSBvmSuV47h96LU4WiHT3es3f4oPwLOPqRRR7X+0vgoHrLH3+UgAOmItQJQwXcDSPlRASh/yifV38ZH+VI+tEEoHrIXaPm7HFSQdMPR/BQY8k8bqECfFKCOYu20Y1cDSAW28RFwBfpa0fEOTTucCmYBoPHWbjeU3TB2POk5vaGsXjTe1pv0wfXSTwopYOooFKAtqPVHQFD8VADaILS+zZ/qYf1N60n+SE+a3w49fCUiQKlgBGQ6v0DDlrAFoPG0A6mgNJ/s1FHJXqCPCth6p/Ud79C7j2gClOwW0Glg4wLKzwGsHjSeOj7pS3a7foEOgbAFseOpoKv90foFGv4odbpAVJB0PTvfjl8dP504tH6BLtAHBnrlOH77L9Zj+rWdDYg6VmqnDkR3/rRD2fXteta/fUiz8aR6Wn5e8i/Qx79YSQtOBaENagEq0Ke3KgW6QKeb6N/57dDhH5najkfj26EzvG8PdJZ+PtsCSlcCisiuR/4IAIp3dTwUv12f8qH1yB6/h6YFVtt3C2rXo/wLNCnk7AXa6fVVoE8PYeGVUcqPwws0SpQVkNy3Q5NCzh4DnT5EuXC/vggA64/Gr17P3inphEhf41G+1k7xnO1Wjxf/06/tCJDUToKm/kng6Q1sC1igryvcDg07YPUGKtDHAlg92qFlCy/Q19+1SE8MOhFlub7GO3S6w+jOlQJG8yl+W8A0H4rXFpzGU/6UjwU01XN5h7aCkMCUsL3TEiAUP8UznQ/FS+tZO+VfoK2ip/EEUIEOBT5NL9DhX3xQOQr07JenSO8CLT8psoJaoKkg0x2d7ox2PfJH+tkrgfVnx1M9rD8av/yh0BaU7ozWnhaY1iMAbf7kjwqa5mv90/gCffoTrXbo2f8ygwCcthfoAn1gKgUiPSFSwNP47fq/7sphj2RbEDpR7PpUULoSkZ38k936p/FW7xc9/zqIzjQqoO0QNmFanwpC8Vl5bDy0PsWf6kX+yU7r0zOB1YviaYce/i8qbIEK9M1+xsAWjHa8teOOLtAk0aWd6tEOLR8KqRrUMdMNl65Pd2oLDMVDVyjSK42X8qH4KL/bXzkwwcUf/KTrp4DQ+tQh7fp2PG0Qstv8CvTw/7FiC27H2xOlQMstQTvMFmD6SFodH8lF6xfomz0UUsHJPg3ENEDTG5D0sPGn/uz8dPzH36HTBAv0tYJWH6qHPVHJn7UX6JNitsA0ngrcDm2RvR5foAv0QYEYCPmQPIvz689UWP/jbzlsAHY8dUR6qqeObOOx/tLxFJ8F2sZDd3jSn+bb+F/8TX+XgwRP7QV69sgu0HDEp8DS/AJdoK8U6JUj+7Ih/nhjesTSQ6k94tN4aL6NJz0hxq8c1FFrrwI7FYg79M5gu1YVIAUKNClU+60UKNC3KleDJQUKNClU+60UKNC3KleDJQUKNClU+60UKNC3KleDJQUKNClU+60UKNC3KleDJQUKNClU+60UKNC3KleDJQUKNClU+60UKNC3KleDJQUKNClU+60UKNC3KleDJQX+AGd30wIN2M5kAAAAAElFTkSuQmCC";

fastify.get("/", async function (request, reply) {
  const addressAPI = await fetch("https://bananoforest.glitch.me/api");
  const body = await addressAPI.json();

  var params = {
    add1: body.add1,
    add2: body.add2,
    add3: body.add3,
    add4: body.add4,
  };
  reply.view("/src/pages/index.hbs", params);
});

fastify.get("/raffle", function (request, reply) {
  var params = {
    addressOrg1: { address: address1, qr: qr1 },
    addressOrg2: { address: address2, qr: qr2 },
    addressOrg3: { address: address3, qr: qr3 },
    addressOrg4: { address: address4, qr: qr4 },
  };
  reply.view("/src/pages/raffle.hbs", params);
});

fastify.get("/faq", function (request, reply) {
  var params = {};
  reply.view("/src/pages/faq.hbs", params);
});

fastify.get("/api", async function (request, reply) {
  const resAddress1 = await fetch(
    "https://api.creeper.banano.cc/v2/accounts/" + address1
  );
  const body1 = await resAddress1.json();

  const resAddress2 = await fetch(
    "https://api.creeper.banano.cc/v2/accounts/" + address2
  );
  const body2 = await resAddress2.json();

  const resAddress3 = await fetch(
    "https://api.creeper.banano.cc/v2/accounts/" + address3
  );
  const body3 = await resAddress3.json();

  const resAddress4 = await fetch(
    "https://api.creeper.banano.cc/v2/accounts/" + address4
  );
  const body4 = await resAddress4.json();

  reply.send({
    add1: math.evaluate(body1.account.balance * 10 ** -29),
    add2: math.evaluate(body2.account.balance * 10 ** -29),
    add3: math.evaluate(body3.account.balance * 10 ** -29),
    add4: math.evaluate(body4.account.balance * 10 ** -29),
  });
});

fastify.listen(process.env.PORT, "0.0.0.0", function (err, address) {
  if (err) {
    fastify.log.error(err);
    process.exit(1);
  }
  console.log(`Your app is listening on ${address}`);
  fastify.log.info(`server listening on ${address}`);
});
